# 4-3. Effectì™€ ë™ê¸°í™”í•˜ê¸°

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, React stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ Reactê°€ ì•„ë‹Œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê±°ë‚˜ ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Effectsë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ ì´í›„ ì¼ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ React ì™¸ë¶€ì˜ ì¼ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **í•™ìŠµ ë‚´ìš©**
>
> - [Effectê°€ ë¬´ì—‡ì¸ì§€](#effectë€-ë¬´ì—‡ì´ë©°-ì´ë²¤íŠ¸ì™€-ì°¨ì´ì ì´-ë¬´ì—‡ì¸ê°€ìš”)
> - [Effectì™€ ì´ë²¤íŠ¸ì˜ ì°¨ì´ì ](#effectë€-ë¬´ì—‡ì´ë©°-ì´ë²¤íŠ¸ì™€-ì°¨ì´ì ì´-ë¬´ì—‡ì¸ê°€ìš”)
> - [ì»´í¬ë„ŒíŠ¸ì—ì„œ Effectë¥¼ ì„ ì–¸í•˜ëŠ” ë°©ë²•](#effect-ì‘ì„±-ë°©ë²•)
> - [ë¶ˆí•„ìš”í•˜ê²Œ Effectë¥¼ ì¬ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê±´ë„ˆë›°ëŠ” ë°©ë²•](#ê°œë°œ-í™˜ê²½ì—ì„œ-ë‘-ë²ˆ-ì‹¤í–‰ë˜ëŠ”-effectë¥¼-ì²˜ë¦¬í•˜ëŠ”-ë°©ë²•ì€-ë¬´ì—‡ì¸ê°€ìš”)
> - [ê°œë°œì‹œ Effectê°€ ë‘ ë²ˆ ì‹¤í–‰ë˜ëŠ” ì´ìœ ì™€ í•´ê²° ë°©ë²•](#ê°œë°œ-í™˜ê²½ì—ì„œ-ë‘-ë²ˆ-ì‹¤í–‰ë˜ëŠ”-effectë¥¼-ì²˜ë¦¬í•˜ëŠ”-ë°©ë²•ì€-ë¬´ì—‡ì¸ê°€ìš”)

## Effectë€ ë¬´ì—‡ì´ë©° ì´ë²¤íŠ¸ì™€ ì°¨ì´ì ì´ ë¬´ì—‡ì¸ê°€ìš”?

Effectì— ë„ë‹¬í•˜ê¸° ì „ì— React êµ¬ì„± ìš”ì†Œ ë‚´ë¶€ì˜ ë‘ê°€ì§€ ìœ í˜•ì˜ ë…¼ë¦¬ì— ìµìˆ™í•´ì ¸ì•¼ í•©ë‹ˆë‹¤.

- ë Œë”ë§ ì½”ë“œ ([UIì„¤ëª…](https://react.dev/learn/describing-the-ui)ì—ì„œ ì†Œê°œë¨)ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì— ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” propsì™€ stateë¥¼ ê°€ì ¸ì™€ ë³€í™˜í•˜ê³  íšŒë©´ì— í‘œì‹œí•˜ë ¤ëŠ” JSXë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. [ë Œë”ë§ ì½”ë“œëŠ” ìˆœìˆ˜í•´ì•¼í•©ë‹ˆë‹¤.](https://react.dev/learn/keeping-components-pure) ìˆ˜í•™ ê³µì‹ì²˜ëŸ¼ ê²°ê³¼ë§Œ ê³„ì‚°í•  ë¿ ë‹¤ë¥¸ ì‘ì—…ì€ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬([ìƒí˜¸ì‘ìš© ì¶”ê°€](https://react.dev/learn/adding-interactivity)ì—ì„œ ì†Œê°œë¨)ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ìˆëŠ” ì¤‘ì²©ëœ í•¨ìˆ˜ë¡œ, ê³„ì‚°ë§Œ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì…ë ¥ í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ HTTP POSTìš”ì²­ì„ ì œì¶œí•˜ì—¬ ì œí’ˆì„ êµ¬ë§¤í•˜ê±°ë‚˜ ì‚¬ìš©ìë¥¼ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ëŠ” íŠ¹ì • ì‚¬ìš©ì ì‘ì—…(ì˜ˆ:ë²„íŠ¼ í´ë¦­ ë˜ëŠ” ì…ë ¥)ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” â€˜[ì‚¬ì´ë“œ ì´í™íŠ¸](<https://en.wikipedia.org/wiki/Side_effect_(computer_science)>)â€™(í”„ë¡œê·¸ë¨ ìƒíƒœ ë³€ê²½)ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ë•Œë•Œë¡œ ì´ê²ƒì€ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í™”ë©´ì— í‘œì‹œë  ë•Œë§ˆë‹¤ ì±„íŒ… ì„œë²„ì— ì—°ê²°í•´ì•¼ í•˜ëŠ” `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ê³ ë ¤í•˜ì‹­ì‹œì˜¤. ì„œë²„ì— ì—°ê²°í•˜ëŠ” ê²ƒì€ ìˆœìˆ˜í•œ ê³„ì‚°ì´ ì•„ë‹ˆë¯€ë¡œ(ì‚¬ì´ë“œ ì´í™íŠ¸) ë Œë”ë§ ì¤‘ì— ë°œìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ `ChatRoom` í‘œì‹œë¥¼ ìœ ë°œí•˜ëŠ” í´ë¦­ê³¼ ê°™ì€ íŠ¹ì •í•œ ë‹¨ì¼ ì´ë²¤íŠ¸ëŠ” ì—†ìŠµë‹ˆë‹¤.

**Effectë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ìì²´ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**  
ì±„íŒ…ì—ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒì€ ì‚¬ìš©ìê°€ íŠ¹ì • ë²„íŠ¼ì„ í´ë¦­í•¨ìœ¼ë¡œì¨ ì§ì ‘ì ìœ¼ë¡œ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì»´í¬ë„ŒíŠ¸ë¥¼ í‘œì‹œí•˜ê²Œ ë§Œë“  ìƒí˜¸ì‘ìš©ì— ê´€ê³„ì—†ì´ ë°œìƒí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì´í™íŠ¸ì…ë‹ˆë‹¤. ì´í™íŠ¸ëŠ” í™”ë©´ ì—…ë°ì´íŠ¸ í›„ [ì»¤ë°‹](https://react.dev/learn/render-and-commit)ì´ ëë‚  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì§€ê¸ˆì€ React ì»´í¬ë„ŒíŠ¸ë¥¼ ì¼ë¶€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ê°™ì€)ê³¼ ë™ê¸°í™”í•˜ê¸°ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.

> **Note**  
> ì´ í…ìŠ¤íŠ¸ì˜ ì—¬ê¸°ì™€ ë’·ë¶€ë¶„ì—ì„œ ëŒ€ë¬¸ìë¡œ í‘œì‹œëœ â€œEffectâ€ëŠ” ìœ„ì˜ React íŠ¹ì • ì •ì˜, ì¦‰ ë Œë”ë§ìœ¼ë¡œ ì¸í•œ ë¶€ì‘ìš©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë” ë„“ì€ í”„ë¡œê·¸ë˜ë° ê°œë…ì„ ì–¸ê¸‰í•˜ê¸° ìœ„í•´ â€˜ì‚¬ì´ë“œ ì´í™íŠ¸â€™ë¼ê³  í•©ë‹ˆë‹¤.

## Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì„œë‘ë¥´ì§€ ë§ˆì‹­ì‹œì˜¤.**  
EffectëŠ” ì¼ë°˜ì ìœ¼ë¡œ Reactì½”ë“œì—ì„œ ë²—ì–´ë‚˜ ì¼ë¶€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤ëŠ” ì ì„ ëª…ì‹¬í•˜ì‹­ì‹œì˜¤. ì—¬ê¸°ì—ëŠ” ë¸Œë¼ìš°ì € API, íƒ€ì‚¬ ìœ„ì ¯, ë„¤íŠ¸ì›Œí¬ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. Effectê°€ ë‹¤ë¥¸ ìƒíƒœì— ë”°ë¼ ì¼ë¶€ ìƒíƒœë§Œ ì¡°ì •í•˜ëŠ” ê²½ìš° [Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.](https://react.dev/learn/you-might-not-need-an-effect)

## Effect ì‘ì„± ë°©ë²•

Effectë¥¼ ì‘ì„±í•˜ë ¤ë©´ ë‹¤ìŒ ì„¸ ë‹¨ê³„ë¥¼ ë”°ë¥´ì‹­ì‹œì˜¤.

1. **Effectë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.** ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ëª¨ë“  ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
2. **Effect ì¢…ì†ì„±ì„ ëª…ì‹œí•©ë‹ˆë‹¤.** ëŒ€ë¶€ë¶„ì˜ EffectëŠ” ë Œë”ë§ í•  ë•Œë§ˆë‹¤ê°€ ì•„ë‹ˆë¼ í•„ìš”í•  ë•Œë§Œ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜ì€ êµ¬ì„± ìš”ì†Œê°€ ë‚˜íƒ€ë‚  ë•Œë§Œ íŠ¸ë¦¬ê±°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì±„íŒ…ë°© ì—°ê²° ë° ì—°ê²° í•´ì œëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¬ë‹¤ ì‚¬ë¼ì§€ê±°ë‚˜ ì±„íŒ…ë°©ì´ ë³€ê²½ë  ë•Œë§Œ ë°œìƒí•´ì•¼ í•©ë‹ˆë‹¤. ì¢…ì†ì„±ì„ ì§€ì •í•˜ì—¬ ì´ë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.
3. **í•„ìš”í•œ ê²½ìš° ì •ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.** ì¼ë¶€ EffectëŠ” ìˆ˜í–‰ì¤‘ì´ë˜ ì‘ì—…ì„ ì¤‘ì§€, ì‹¤í–‰ ì·¨ì†Œ ë˜ëŠ” ì •ë¦¬í•˜ëŠ” ë°©ë²•ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ â€œconnectâ€ì—ëŠ” â€œdisconnectâ€ê°€ í•„ìš”í•˜ê³  â€œsubscribeâ€ì—ëŠ” â€œunsubscribeâ€ê°€ í•„ìš”í•˜ë©° â€œfectchâ€ì—ëŠ” â€œcancelâ€ë˜ëŠ” â€œignoreâ€ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.

### Step 1 : Effect ì„ ì–¸í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì„ ì–¸í•˜ê¸° ìœ„í•´ì„œ Reactì—ì„œ [`useEffect`](https://react.dev/reference/react/useEffect)í›…ì„ importí•©ë‹ˆë‹¤.

```javascript
import { useEffect } from 'react';
```

ê·¸ëŸ° ë‹¤ìŒ, ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ í˜¸ì¶œí•˜ê³  Effect ë‚´ë¶€ì— ì½”ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```javascript
function MyComponent() {
  useEffect(() => {
    // Code here will run after *every* render
  });
  return <div />;
}
```

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ReactëŠ” í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ê³  `useEffect` ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì¦‰, **`useEffect`ëŠ” í•´ë‹¹ ë Œë”ë§ì´ í™”ë©´ì— ë°˜ì˜ì´ ë  ë•Œê¹Œì§€ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ ì¡°ê°ì„ â€œì§€ì—°â€í•©ë‹ˆë‹¤.**

Effectë¥¼ ì‚¬ìš©í•˜ì—¬ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. `<VideoPlayer>` React ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ì„¸ìš”. `isPlaying` propë¥¼ ì „ë‹¬í•˜ì—¬ ì¬ìƒ ë˜ëŠ” ì¼ì‹œ ì¤‘ì§€ ì—¬ë¶€ë¥¼ ì œì–´í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```javascript
<VideoPlayer isPlaying={isPlaying} />
```

ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ `<VideoPlayer>` ëŠ” ë‚´ì¥ ë¸Œë¼ìš°ì € `<video>` íƒœê·¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.

```javascript
function VideoPlayer({ src, isPlaying }) {
  // TODO: do something with isPlaying
  return <video src={src} />;
}
```

ê·¸ëŸ¬ë‚˜, ë¸Œë¼ìš°ì € `<video>`íƒœê·¸ì—ëŠ” `isPlaying` propsê°€ ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ ì œì–´í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ DOMìš”ì†Œì—ì„œ `play()` ì™€ `pause()` ë©”ì„œë“œë¥¼ ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. **ë¹„ë””ì˜¤ê°€ í˜„ì¬ ì¬ìƒë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œë ¤ì£¼ëŠ” propê°’ì„ play()ì™€ pause()ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œê³¼ ë™ê¸°í™”í•´ì•¼í•©ë‹ˆë‹¤.**  
ë¨¼ì € `<video>` DOM ë…¸ë“œì— ëŒ€í•œ [ì°¸ì¡°ë¥¼ ê°€ì ¸ì™€ì•¼](https://react.dev/learn/manipulating-the-dom-with-refs)í•©ë‹ˆë‹¤.
ë Œë”ë§ ì¤‘ì— `play()` ë˜ëŠ” `pause()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆì§€ë§Œ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play(); // Calling these while rendering isn't allowed.
  } else {
    ref.current.pause(); // Also, this crashes.
  }

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

ì´ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ìœ ëŠ” ë Œë”ë§ ì¤‘ì— DOM ë…¸ë“œë¡œ ë¬´ì–¸ê°€ë¥¼ ì‹œë„í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Reactì—ì„œ [ë Œë”ë§ì€ JSXì˜ ìˆœìˆ˜ ê³„ì‚°ì´ì–´ì•¼ í•˜ë©°](https://react.dev/learn/keeping-components-pure) DOM ìˆ˜ì •ê³¼ ê°™ì€ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ í¬í•¨í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.  
ê²Œë‹¤ê°€ `VideoPlayer`ê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ DOMì´ ì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤! ReactëŠ” JSXë¥¼ ë°˜í™˜ í•  ë•Œê¹Œì§€ ì–´ë–¤ DOMì„ ë§Œë“¤ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— `play()`ë‚˜ `pause()`ë¥¼ í˜¸ì¶œí•  DOMë…¸ë“œê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.  
ì—¬ê¸°ì„œ í•´ê²°ì±…ì€ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ `useEffect`ì™€ ë˜í•‘í•˜ì—¬ ë Œë”ë§ ê³„ì‚° ë°–ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤.

```javascript
import { useEffect, useRef } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

DOM ì—…ë°ì´íŠ¸ë¥¼ Effectì— ë˜í•‘í•˜ë©´ ë¨¼ì € í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ íš¨ê³¼ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

`VideoPlayer` ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ (ì²˜ìŒ ë Œë”ë§í•˜ê±°ë‚˜ ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” ê²½ìš°) ëª‡ ê°€ì§€ ì¼ì´ ë°œìƒí•©ë‹ˆë‹¤. ë¨¼ì € ReactëŠ” í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ `<video>`íƒœê·¸ê°€ ì˜¬ë°”ë¥¸ propsì™€ í•¨ê»˜ DOMì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ Reactê°€ Effectë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ EffectëŠ” `isPlaying`ì˜ ê°’ì— ë”°ë¼ `play()`ë‚˜ `pause()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

ì¬ìƒ/ì¼ì‹œ ì¤‘ì§€ ë²„íŠ¼ì„ ì—¬ëŸ¬ ë²ˆ ëˆ„ë¥´ê³  ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ê°€ `isPlaying`ê°’ê³¼ ë™ê¸°í™”ëœ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•©ë‹ˆë‹¤.

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

ì´ ì˜ˆì œì—ì„œ React stateì— ë™ê¸°í™”í•œ "ì™¸ë¶€ ì‹œìŠ¤í…œ"ì€ ë¸Œë¼ìš°ì € ë¯¸ë””ì–´ APIì˜€ìŠµë‹ˆë‹¤. ë¹„ìŠ·í•œ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë ˆê±°ì‹œ ë¹„ React ì½”ë“œ(ì˜ˆ: jQuery í”ŒëŸ¬ê·¸ì¸)ë¥¼ ì„ ì–¸ì  React ì»´í¬ë„ŒíŠ¸ë¡œ ë˜í•‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë™ì˜ìƒ í”Œë ˆì´ì–´ ì œì–´ëŠ” ì‹¤ì œë¡œëŠ” í›¨ì”¬ ë” ë³µì¡í•˜ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”. `play()` í˜¸ì¶œì´ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆê³ , ì‚¬ìš©ìê°€ ë‚´ì¥ëœ ë¸Œë¼ìš°ì € ì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•˜ì—¬ ì¬ìƒí•˜ê±°ë‚˜ ì¼ì‹œì •ì§€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ì˜ˆì‹œëŠ” ë§¤ìš° ë‹¨ìˆœí•˜ê³  ë¶ˆì™„ì „í•©ë‹ˆë‹¤.

> **Pitfall**  
> ê¸°ë³¸ì ìœ¼ë¡œ EffectsëŠ” _ë§¤ë²ˆ_ ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œëŠ” **ë¬´í•œ ë£¨í”„**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
>
> ```javascript
> const [count, setCount] = useState(0);
> useEffect(() => {
>   setCount(count + 1);
> });
> ```
>
> EffectsëŠ” ë Œë”ë§ì˜ *ê²°ê³¼*ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. stateë¥¼ ì„¤ì •í•˜ë©´ ë Œë”ë§ì´ *íŠ¸ë¦¬ê±°*ë©ë‹ˆë‹¤. Effectì—ì„œ ì¦‰ì‹œ stateë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì „ì› ì½˜ì„¼íŠ¸ë¥¼ ê½‚ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. Effectê°€ ì‹¤í–‰ë˜ê³ , stateë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ì‹œ ë Œë”ë§ì´ ë°œìƒí•˜ê³ , ë‹¤ì‹œ ë Œë”ë§ì´ ë°œìƒí•˜ë©´ Effectê°€ ì‹¤í–‰ë˜ê³ , ë‹¤ì‹œ stateë¥¼ ì„¤ì •í•˜ë©´ ë˜ ë‹¤ì‹œ ë Œë”ë§ì´ ë°œìƒí•˜ëŠ” ì‹ì…ë‹ˆë‹¤.  
> EffectëŠ” ë³´í†µ ì»´í¬ë„ŒíŠ¸ë¥¼ _ì™¸ë¶€_ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ê³  ë‹¤ë¥¸ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¼ë¶€ stateë§Œ ì¡°ì •í•˜ë ¤ëŠ” ê²½ìš° [Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.](https://www.notion.so/66803982a7a2474bb0a1c461f6a2fbde)

### Step 2 : Effect ì¢…ì†ì„± ì§€ì •í•˜ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” _ë§¤ë²ˆ_ ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ **ì›í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ê²½ìš°**ê°€ ë§ìŠµë‹ˆë‹¤.

ë•Œë¡œëŠ” ì†ë„ê°€ ëŠë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ë™ê¸°í™”ê°€ í•­ìƒ ì¦‰ê°ì ì¸ ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ ê¼­ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ë™ê¸°í™”ë¥¼ ê±´ë„ˆë›°ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í‚¤ ì…ë ¥ ì‹œë§ˆë‹¤ ì±„íŒ… ì„œë²„ì— ë‹¤ì‹œ ì—°ê²°í•˜ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë•Œë¡œëŠ” ì˜ëª»ëœ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í‚¤ ì…ë ¥ ì‹œë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ í˜ì´ë“œì¸ ì• ë‹ˆë©”ì´ì…˜ì„ íŠ¸ë¦¬ê±°í•˜ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• ë‹ˆë©”ì´ì…˜ì€ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë‚˜íƒ€ë‚  ë•Œ í•œ ë²ˆë§Œ ì¬ìƒë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´ ëª‡ ê°œì˜ `console.log` í˜¸ì¶œê³¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í…ìŠ¤íŠ¸ ì…ë ¥ì°½ì´ í¬í•¨ëœ ì´ì „ ì˜ˆì‹œê°€ ìˆìŠµë‹ˆë‹¤. ì…ë ¥ ì‹œ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

`useEffect` í˜¸ì¶œì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ _ì˜ì¡´ì„±_ ë°°ì—´ì„ ì§€ì •í•˜ë©´ Reactê°€ ë¶ˆí•„ìš”í•˜ê²Œ Effectë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ ì§€ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì‹œ 14ì¤„ì— ë¹ˆ `[]` ë°°ì—´ì„ ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”:

```javascript
useEffect(() => {
  // ...
}, []);
```

ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ í‘œì‹œë  ê²ƒì…ë‹ˆë‹¤: `'React Hook ì‚¬ìš©íš¨ê³¼ì— ëˆ„ë½ëœ ì¢…ì†ì„±ì´ ìˆìŠµë‹ˆë‹¤: 'isPlaying'`

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  }, []); // This causes an error

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

ë¬¸ì œëŠ” Effect ë‚´ë¶€ì˜ ì½”ë“œê°€ `isPlaying` propì— *ì¢…ì†*ë˜ì–´ ìˆ˜í–‰í•  ì‘ì—…ì„ ê²°ì •í•˜ëŠ”ë°, ì´ ì¢…ì†ì„±ì´ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì¢…ì†ì„± ë°°ì—´ì— `isPlaying`ì„ ì¶”ê°€í•˜ì„¸ìš”:

```javascript
useEffect(() => {
  if (isPlaying) {
    // ì—¬ê¸°ì—ì„œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì—...
    // ...
  } else {
    // ...
  }
}, [isPlaying]); // ...ì—¬ê¸°ì— ì„ ì–¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤!
```

ì´ì œ ëª¨ë“  ì˜ì¡´ì„±ì´ ì„ ì–¸ë˜ì—ˆìœ¼ë¯€ë¡œ ì˜¤ë¥˜ê°€ ì—†ìŠµë‹ˆë‹¤. ì¢…ì†ì„± ë°°ì—´ë¡œ `[isPlaying]`ì„ ì§€ì •í•˜ë©´ `isPlaying`ì´ ì´ì „ ë Œë”ë§ ë•Œì™€ ê°™ìœ¼ë©´ Effectë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ê³  Reactì— ì•Œë ¤ì¤ë‹ˆë‹¤. ì´ë ‡ê²Œ ë³€ê²½í•˜ë©´ ì…ë ¥ì„ ì…ë ¥í•´ë„ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šì§€ë§Œ, ì¬ìƒ/ì¼ì‹œì •ì§€ë¥¼ ëˆ„ë¥´ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤:

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      console.log('Calling video.play()');
      ref.current.play();
    } else {
      console.log('Calling video.pause()');
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  const [text, setText] = useState('');
  return (
    <>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

ì˜ì¡´ì„± ë°°ì—´ì€ ì—¬ëŸ¬ ê°œì˜ ì˜ì¡´ì„±ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ReactëŠ” ì§€ì •í•œ ëª¨ë“  ì¢…ì†ì„±ì˜ ê°’ì´ ì´ì „ ë Œë”ë§ ë•Œì™€ ì •í™•íˆ ë™ì¼í•œ ê²½ìš°ì—ë§Œ Effectë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê±´ë„ˆëœë‹ˆë‹¤. ReactëŠ” [Object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) ë¹„êµë¥¼ ì‚¬ìš©í•´ ì˜ì¡´ì„± ê°’ì„ ë¹„êµí•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [useEffect ì°¸ì¡°](https://react.dev/reference/react/useEffect#reference)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

**ì¢…ì†ì„±ì„ "ì„ íƒ"í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.** ì§€ì •í•œ ì˜ì¡´ì„±ë“¤ì´ ì´ëŠ” ì½”ë“œì—ì„œ ë§ì€ ë²„ê·¸ë¥¼ ì¡ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ì¼ë¶€ ì½”ë“œê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, [*Effect ì½”ë“œ ìì²´ë¥¼ í¸ì§‘*í•˜ì—¬ í•´ë‹¹ ì¢…ì†ì„±ì„ "í•„ìš”"í•˜ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”.](https://www.notion.so/66803982a7a2474bb0a1c461f6a2fbde)

> **Pitfall**  
> ì¢…ì†ì„± ë°°ì—´ì´ ì—†ëŠ” ê²½ìš°ì™€ _ë¹„ì–´ ìˆëŠ”_ `[]` ì¢…ì†ì„± ë°°ì—´ì´ ìˆëŠ” ê²½ìš°ì˜ ë™ì‘ì€ ë‹¤ë¦…ë‹ˆë‹¤:
>
> ```javascript
> useEffect(() => {
>   // This runs after every render
> });
>
> useEffect(() => {
>   // This runs only on mount (when the component appears)
> }, []);
>
> useEffect(() => {
>   // This runs on mount *and also* if either a or b have changed since the last render
> }, [a, b]);
> ```
>
> ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” â€œë§ˆìš´íŠ¸â€ê°€ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

> **[DEEP DIVE] ì˜ì¡´ì„± ë°°ì—´ì—ì„œ refê°€ ìƒëµëœ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?**  
> ì´ EffectëŠ” `ref`ì™€ `isPlaying`ì„ ëª¨ë‘ ì‚¬ìš©í•˜ì§€ë§Œ, ì¢…ì†ì„±ìœ¼ë¡œ ì„ ì–¸ëœ ê²ƒì€ `isPlaying`ë¿ì…ë‹ˆë‹¤:
>
> ```javascript
> function VideoPlayer({ src, isPlaying }) {
>   const ref = useRef(null);
>   useEffect(() => {
>     if (isPlaying) {
>       ref.current.play();
>     } else {
>       ref.current.pause();
>     }
>   }, [isPlaying]);
> }
> ```
>
> ì´ëŠ” `ref` ê°ì²´ê°€ *ì•ˆì •ì ì¸ ì •ì²´ì„±*ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤: ReactëŠ” ëª¨ë“  ë Œë”ë§ì—ì„œ ë™ì¼í•œ `useRef` í˜¸ì¶œì—ì„œ [í•­ìƒ ë™ì¼í•œ ê°ì²´ë¥¼ ì–»ì„ ìˆ˜ ìˆë„ë¡](https://www.notion.so/ed58be78855e4c1ca1c88041109f06ca) ë³´ì¥í•©ë‹ˆë‹¤. ì ˆëŒ€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê·¸ ìì²´ë¡œ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í¬í•¨ ì—¬ë¶€ëŠ” ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í¬í•¨í•´ë„ ê´œì°®ìŠµë‹ˆë‹¤:
>
> ```javascript
> function VideoPlayer({ src, isPlaying }) {
>   const ref = useRef(null);
>   useEffect(() => {
>     if (isPlaying) {
>       ref.current.play();
>     } else {
>       ref.current.pause();
>     }
>   }, [isPlaying, ref]);
> }
> ```
>
> `useState`ê°€ ë°˜í™˜í•˜ëŠ” [ì„¤ì •ì í•¨ìˆ˜](https://react.dev/reference/react/useState#setstate)ë„ ì•ˆì •ëœ ì •ì²´ì„±ì„ ê°€ì§€ë¯€ë¡œ ì¢…ì†ì„±ì—ì„œ ìƒëµë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. linterë¥¼ í†µí•´ ì˜¤ë¥˜ ì—†ì´ ì¢…ì†ì„±ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤ë©´ ê·¸ë ‡ê²Œ í•´ë„ ì•ˆì „í•©ë‹ˆë‹¤.  
> í•­ìƒ ì•ˆì •ì ì¸ ì¢…ì†ì„±ì„ ìƒëµí•˜ë©´ linterê°€ ê°ì²´ê°€ ì•ˆì •ì ì´ë¼ëŠ” ê²ƒì„ "í™•ì¸í• " ìˆ˜ ìˆì„ ë•Œë§Œ ì‘ë™í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ `ref`ê°€ ì „ë‹¬ëœ ê²½ìš° ì¢…ì†ì„± ë°°ì—´ì— ì´ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ í•­ìƒ ë™ì¼í•œ ì°¸ì¡°ë¥¼ ì „ë‹¬í•˜ëŠ”ì§€, ì•„ë‹ˆë©´ ì—¬ëŸ¬ ì°¸ì¡° ì¤‘ í•˜ë‚˜ë¥¼ ì¡°ê±´ë¶€ë¡œ ì „ë‹¬í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ ë°©ë²•ì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ EffectëŠ” ì „ë‹¬ë˜ëŠ” ì°¸ì¡°ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

### Step 3 : í•„ìš”í•œ ê²½ìš° cleanup ì¶”ê°€í•˜ê¸°

ë‹¤ë¥¸ ì˜ˆì‹œë¥¼ ìƒê°í•´ ë´…ì‹œë‹¤. ì±„íŒ… ì„œë²„ê°€ ë‚˜íƒ€ë‚  ë•Œ ì±„íŒ… ì„œë²„ì— ì—°ê²°í•´ì•¼ í•˜ëŠ” `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. `connect()` ì™€ `disconnect()` ë©”ì„œë“œê°€ ìˆëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”`createConnection()` APIê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ë™ì•ˆ ì–´ë–»ê²Œ ì—°ê²° ìƒíƒœë¥¼ ìœ ì§€í•˜ë‚˜ìš”?

Effect ë¡œì§ì„ ì‘ì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”:

```javascript
useEffect(() => {
  const connection = createConnection();
  connection.connect();
});
```

ë‹¤ì‹œ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì±„íŒ…ì„ ìœ„í•œ ì—°ê²°ì— ì†ë„ê°€ ëŠë ¤ì§€ë¯€ë¡œ ì¢…ì†ì„± ë°°ì—´ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```javascript
useEffect(() => {
  const connection = createConnection();
  connection.connect();
}, []);
```

**Effect ë‚´ë¶€ì˜ ì½”ë“œëŠ” propsë‚˜ stateë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ì¡´ì„± ë°°ì—´ì€ `[]`(ë¹„ì–´ ìˆìŒ)ì…ë‹ˆë‹¤. ì´ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ "ë§ˆìš´íŠ¸"ë  ë•Œ, ì¦‰ í™”ë©´ì— ì²˜ìŒ ë‚˜íƒ€ë‚  ë•Œë§Œ ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë„ë¡ Reactì— ì§€ì‹œí•©ë‹ˆë‹¤.**

ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì„¸ìš”:

```javascript
import { useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

ì´ ì´í™íŠ¸ëŠ” ë§ˆìš´íŠ¸ ì‹œì—ë§Œ ì‹¤í–‰ë˜ë¯€ë¡œ ì½˜ì†”ì—ì„œ `"âœ… Connecting..."`ì´ í•œ ë²ˆ ì¸ì‡„ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **í•˜ì§€ë§Œ ì½˜ì†”ì„ í™•ì¸í•´ë³´ë©´ `"âœ… Connecting..."`ì´ ë‘ ë²ˆ ì¶œë ¥ë©ë‹ˆë‹¤. ì™œ ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ë‚˜ìš”?**

`ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì–‘í•œ í™”ë©´ìœ¼ë¡œ êµ¬ì„±ëœ í° ì•±ì˜ ì¼ë¶€ë¼ê³  ìƒìƒí•´ ë³´ì„¸ìš”. ì‚¬ìš©ìëŠ” `ChatRoom` í˜ì´ì§€ì—ì„œ ì—¬ì •ì„ ì‹œì‘í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê³  `connection.connect()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í™”ë©´(ì˜ˆ: ì„¤ì • í˜ì´ì§€)ìœ¼ë¡œ ì´ë™í•œë‹¤ê³  ìƒìƒí•´ ë³´ì„¸ìš”. `ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë’¤ë¡œ ê°€ê¸°(Back)ë¥¼ í´ë¦­í•˜ë©´ `ChatRoom`ì´ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë‘ ë²ˆì§¸ ì—°ê²°ì´ ì„¤ì •ë˜ì§€ë§Œ ì²« ë²ˆì§¸ ì—°ê²°ì€ íŒŒê´´ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤! ì‚¬ìš©ìê°€ ì•±ì„ íƒìƒ‰í•  ë•Œ ì—°ê²°ì€ ê³„ì† ìŒ“ì´ê²Œ ë©ë‹ˆë‹¤.

ì´ì™€ ê°™ì€ ë²„ê·¸ëŠ” ê´‘ë²”ìœ„í•œ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì—†ì´ëŠ” ë†“ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ë²„ê·¸ë¥¼ ë¹ ë¥´ê²Œ ë°œê²¬í•  ìˆ˜ ìˆë„ë¡ ê°œë°œ ë‹¨ê³„ì—ì„œ ReactëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ìµœì´ˆ ë§ˆìš´íŠ¸ ì§í›„ì— í•œ ë²ˆì”© ë‹¤ì‹œ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.

`"âœ… Connecting..."` ë¡œê·¸ë¥¼ ë‘ ë²ˆ í™•ì¸í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ì½”ë“œê°€ ì—°ê²°ì„ ë‹«ì§€ ì•ŠëŠ” ì‹¤ì œ ë¬¸ì œë¥¼ íŒŒì•…í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ Effectì—ì„œ cleanup í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì„¸ìš”:

```javascript
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  return () => {
    connection.disconnect();
  };
}, []);
```

ReactëŠ” Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê¸° ì „ì— ë§¤ë²ˆ ì •ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œ(ì œê±°)ë  ë•Œ ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ ë” í˜¸ì¶œí•©ë‹ˆë‹¤. ì •ë¦¬ í•¨ìˆ˜ê°€ êµ¬í˜„ë˜ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤:

```javascript
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

ì´ì œ 3ê°œì˜ ì½˜ì†” ë¡œê·¸ê°€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. `"âœ… Connecting..."`
2. `"âŒ Disconnected."`
3. `"âœ… Connecting..."`

**ì´ëŠ” ê°œë°œ ë‹¨ê³„ì—ì„œ ì˜¬ë°”ë¥¸ ë™ì‘ì…ë‹ˆë‹¤.** ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•˜ë©´ ReactëŠ” ë©€ë¦¬ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì™€ë„ ì½”ë“œê°€ ê¹¨ì§€ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì—°ê²°ì„ ëŠì—ˆë‹¤ê°€ ë‹¤ì‹œ ì—°ê²°í•˜ëŠ” ê²ƒì€ ì •í™•íˆ ì¼ì–´ë‚˜ì•¼ í•˜ëŠ” ì¼ì…ë‹ˆë‹¤! ì •ë¦¬ë¥¼ ì˜ êµ¬í˜„í•˜ë©´ Effectë¥¼ í•œ ë²ˆ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ì‹¤í–‰í•˜ê³  ì •ë¦¬í•œ í›„ ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒ ì‚¬ì´ì— ì‚¬ìš©ìê°€ ë³¼ ìˆ˜ ìˆëŠ” ì°¨ì´ê°€ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤. Reactê°€ ê°œë°œ ê³¼ì •ì—ì„œ ì½”ë“œì— ë²„ê·¸ê°€ ìˆëŠ”ì§€ ê²€ì‚¬í•˜ê¸° ë•Œë¬¸ì— ì—°ê²°/ì—°ê²° í•´ì œ í˜¸ì¶œ ìŒì´ ì¶”ê°€ë©ë‹ˆë‹¤. ì´ê²ƒì€ ì •ìƒì ì¸ í˜„ìƒì´ë‹ˆ ì—†ì• ë ¤ê³  í•˜ì§€ ë§ˆì„¸ìš”!

**í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” `"âœ… Connecting..."`ì´ í•œ ë²ˆë§Œ ì¸ì‡„ë©ë‹ˆë‹¤.** ì»´í¬ë„ŒíŠ¸ ì¬ì¥ì°©ì€ ì •ë¦¬ê°€ í•„ìš”í•œ ì´í™íŠ¸ë¥¼ ì°¾ëŠ” ë° ë„ì›€ì´ ë˜ë„ë¡ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìˆ˜í–‰ë©ë‹ˆë‹¤. [Strict Mode](https://react.dev/reference/react/StrictMode) ë¥¼ í•´ì œí•˜ì—¬ ê°œë°œ ë™ì‘ì„ ì„ íƒ í•´ì œí•  ìˆ˜ ìˆì§€ë§Œ, ê³„ì† ì¼œë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìœ„ì™€ ê°™ì€ ë§ì€ ë²„ê·¸ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê°œë°œ í™˜ê²½ì—ì„œ ë‘ ë²ˆ ì‹¤í–‰ë˜ëŠ” Effectë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€ìš”?

ReactëŠ” ì§€ë‚œ ì˜ˆì œì—ì„œì™€ ê°™ì´ ë²„ê·¸ë¥¼ ì°¾ê¸° ìœ„í•´ ê°œë°œ ì¤‘ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ë„ì ìœ¼ë¡œ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤. **ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì€ "ì–´ë–»ê²Œ Effectë¥¼ í•œ ë²ˆ ì‹¤í–‰í•˜ëŠ”ê°€"ê°€ ì•„ë‹ˆë¼ "ì–´ë–»ê²Œ Effectë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•œ í›„ ì‘ë™í•˜ë„ë¡ ìˆ˜ì •í•˜ëŠ”ê°€"ì…ë‹ˆë‹¤.**

ì¼ë°˜ì ìœ¼ë¡œ ì •ë‹µì€ cleanup í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. cleanup í•¨ìˆ˜ëŠ” Effectê°€ ìˆ˜í–‰ ì¤‘ì´ë˜ ì‘ì—…ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ì‹¤í–‰ ì·¨ì†Œí•´ì•¼ í•©ë‹ˆë‹¤. ê²½í—˜ìƒ ì‚¬ìš©ìê°€ í”„ë¡œë•ì…˜ì—ì„œì™€ ê°™ì´ í•œ ë²ˆ ì‹¤í–‰ë˜ëŠ” Effectì™€ ê°œë°œ í™˜ê²½ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” _ì„¤ì • â†’ ì •ë¦¬ â†’ ì„¤ì •_ ì‹œí€€ìŠ¤ë¥¼ êµ¬ë¶„í•  ìˆ˜ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.

ì‘ì„±í•˜ê²Œ ë  ëŒ€ë¶€ë¶„ì˜ EffectëŠ” ì•„ë˜ì˜ ì¼ë°˜ì ì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ì— í•´ë‹¹í•©ë‹ˆë‹¤.

### Reactê°€ ì•„ë‹Œ ìœ„ì ¯ ì œì–´

ë•Œë•Œë¡œ Reactì— ì‘ì„±ë˜ì§€ ì•Šì€ UI ìœ„ì ¯ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ì§€ì— ì§€ë„ êµ¬ì„± ìš”ì†Œë¥¼ ì¶”ê°€í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” setZoomLevel() ë©”ì„œë“œê°€ ìˆìœ¼ë©°, í™•ëŒ€/ì¶•ì†Œ ìˆ˜ì¤€ì„ React ì½”ë“œì˜ zoomLevel ìƒíƒœ ë³€ìˆ˜ì™€ ë™ê¸°í™”í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. íš¨ê³¼ëŠ” ë‹¤ìŒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

ì´ ê²½ìš° ì •ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°œë°œ ë‹¨ê³„ì—ì„œ ReactëŠ” Effectë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ì§€ë§Œ ë™ì¼í•œ ê°’ìœ¼ë¡œ `setZoomLevel`ì„ ë‘ ë²ˆ í˜¸ì¶œí•´ë„ ì•„ë¬´ ì‘ì—…ì´ ìˆ˜í–‰ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•½ê°„ ëŠë¦´ ìˆ˜ ìˆì§€ë§Œ í”„ë¡œë•ì…˜ì—ì„œ ë¶ˆí•„ìš”í•˜ê²Œ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì¼ë¶€ APIëŠ” ì—°ì†ìœ¼ë¡œ ë‘ ë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‚´ì¥ `<dialog>` ìš”ì†Œì˜ `showModal` ë©”ì„œë“œëŠ” ë‘ ë²ˆ í˜¸ì¶œí•˜ë©´ throwë©ë‹ˆë‹¤. ì •ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³  ëŒ€í™” ìƒìë¥¼ ë‹«ë„ë¡ í•©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

ê°œë°œ ì¤‘ì— EffectëŠ” `showModal()`ì„ í˜¸ì¶œí•œ ë‹¤ìŒ ì¦‰ì‹œ `close()`ë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒ ë‹¤ì‹œ `showModal()`ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ëŠ” í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ `showModal()`ì„ í•œ ë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ì‚¬ìš©ì í‘œì‹œ ë™ì‘ì„ ê°–ìŠµë‹ˆë‹¤.

### ì´ë²¤íŠ¸ êµ¬ë…

Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•˜ëŠ” ê²½ìš° ì •ë¦¬ ê¸°ëŠ¥ì€ êµ¬ë…ì„ ì·¨ì†Œí•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);
```

ê°œë°œ ì¤‘ì— EffectëŠ” `addEventListener()`ë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒ ì¦‰ì‹œ `removeEventListener()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë™ì¼í•œ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì‹œ `addEventListener()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ í•œ ë²ˆì— í•˜ë‚˜ì˜ í™œì„± êµ¬ë…ë§Œ ìˆê²Œ ë©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ì—ì„œì™€ ê°™ì´ `addEventListener()`ë¥¼ í•œ ë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ì‚¬ìš©ì í‘œì‹œ ë™ì‘ì´ ìˆìŠµë‹ˆë‹¤.

### ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°ë§

Effectê°€ ë¬´ì–¸ê°€ë¥¼ ì• ë‹ˆë©”ì´ì…˜í™”í•˜ëŠ” ê²½ìš° cleanup í•¨ìˆ˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
  return () => {
    node.style.opacity = 0; // Reset to the initial value
  };
}, []);
```

ê°œë°œ ê³¼ì •ì—ì„œ ë¶ˆíˆ¬ëª…ë„ëŠ” 1 ê·¸ë¦¬ê³  0 ê·¸ë¦¬ê³  ë‹¤ì‹œ 1ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. ì´ê²ƒì€ 1ë¡œ ì§ì ‘ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ì‚¬ìš©ì ê°€ì‹œì  ë™ì‘ì„ ê°€ì ¸ì•¼ í•˜ë©°, ì´ëŠ” í”„ë¡œë•ì…˜ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤. íŠ¸ìœ„ë‹ì„ ì§€ì›í•˜ëŠ” íƒ€ì‚¬ ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì •ë¦¬ ê¸°ëŠ¥ì´ íƒ€ì„ë¼ì¸ì„ ì´ˆê¸° ìƒíƒœë¡œ ì¬ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

### ë°ì´í„° Fetching

Effectê°€ ë¬´ì–¸ê°€ë¥¼ ê°€ì ¸ì˜¤ë©´ ì •ë¦¬ í•¨ìˆ˜ëŠ” [fetchë¥¼ ì¤‘ë‹¨](https://developer.mozilla.org/en-US/docs/Web/API/AbortController)í•˜ê±°ë‚˜ ê·¸ ê²°ê³¼ë¥¼ ë¬´ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

ì´ë¯¸ ë°œìƒí•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ "ì‹¤í–‰ ì·¨ì†Œ"í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ ì •ë¦¬ ê¸°ëŠ¥ì€ _ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ”_ fetchê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê³„ì† ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ `userId`ê°€ `'Alice'`ì—ì„œ `'Bob'`ìœ¼ë¡œ ë³€ê²½ë˜ë©´ ì •ë¦¬ëŠ” `'Alice'` ì‘ë‹µì´ `'Bob'` ì´í›„ì— ë„ì°©í•˜ë”ë¼ë„ ë¬´ì‹œë˜ë„ë¡ í•©ë‹ˆë‹¤.

**ê°œë°œ ì¤‘ì—ëŠ” ë„¤íŠ¸ì›Œí¬ íƒ­ì— ë‘ ê°œì˜ ê°€ì ¸ì˜¤ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤.** ì´ëŠ” ì•„ë¬´ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ìœ„ì˜ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ì²« ë²ˆì§¸ Effectê°€ ì¦‰ì‹œ ì •ë¦¬ë˜ë¯€ë¡œ `ignore` ë³€ìˆ˜ì˜ ë³µì‚¬ë³¸ì´ `true`ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì¶”ê°€ ìš”ì²­ì´ ìˆë”ë¼ë„ `if (!ignore)`ê²€ì‚¬ ë•ë¶„ì— ìƒíƒœì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**í”„ë¡œë•ì…˜ì—ì„œëŠ” ìš”ì²­ì´ í•˜ë‚˜ë§Œ ìˆìŠµë‹ˆë‹¤.** ê°œë°œ ì¤‘ì¸ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê·€ì°®ì€ ê²½ìš° ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìš”ì²­ì„ ì¤‘ë³µ ì œê±°í•˜ê³  êµ¬ì„± ìš”ì†Œ ê°„ì— ì‘ë‹µì„ ìºì‹œí•˜ëŠ” ì†”ë£¨ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```javascript
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
}
```

ì´ë ‡ê²Œ í•˜ë©´ ê°œë°œ ê²½í—˜ì´ í–¥ìƒë  ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë” ë¹ ë¥´ê²Œ ëŠê»´ì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë’¤ë¡œ ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ì‚¬ìš©ìëŠ” ì¼ë¶€ ë°ì´í„°ê°€ ìºì‹œë˜ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìºì‹œë¥¼ ì§ì ‘ êµ¬ì¶•í•˜ê±°ë‚˜ Effectsì—ì„œ manual fetchingì— ëŒ€í•œ ë§ì€ ëŒ€ì•ˆ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **[DEEP DIVE] Effectsì—ì„œ ë°ì´í„°ë¥¼ fetchingí•˜ëŠ” ê²ƒì˜ ì¢‹ì€ ëŒ€ì•ˆì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?**  
> Effects ë‚´ì—ì„œ `fetch` í˜¸ì¶œì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ íŠ¹íˆ ì™„ì „í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì•±ì—ì„œ [ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¸ê¸° ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤.](https://www.robinwieruch.de/react-hooks-fetch-data/) ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ ë§¤ìš° ìˆ˜ë™ì ì¸ ì ‘ê·¼ ë°©ì‹ì´ë©° ìƒë‹¹í•œ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.
>
> - **EffectsëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì¦‰, ì´ˆê¸° ì„œë²„ ë Œë”ë§ HTMLì—ëŠ” ë°ì´í„°ê°€ ì—†ëŠ” ë¡œë“œ ìƒíƒœë§Œ í¬í•¨ë©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì»´í“¨í„°ëŠ” ì´ì œ ë°ì´í„°ë¥¼ ë¡œë“œí•´ì•¼ í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°œê²¬í•˜ê¸° ìœ„í•´ì„œë§Œ ëª¨ë“  JavaScriptë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì•±ì„ ë Œë”ë§í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ ê·¸ë‹¤ì§€ íš¨ìœ¨ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
> - **Effectsì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ë©´ "ë„¤íŠ¸ì›Œí¬ í­í¬"ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.** ìƒìœ„ êµ¬ì„± ìš”ì†Œë¥¼ ë Œë”ë§í•˜ë©´ ì¼ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  í•˜ìœ„ êµ¬ì„± ìš”ì†Œë¥¼ ë Œë”ë§í•œ ë‹¤ìŒ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ë§¤ìš° ë¹ ë¥´ì§€ ì•Šìœ¼ë©´ ëª¨ë“  ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤.
> - **Effectsì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ìºì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.** ì˜ˆë¥¼ ë“¤ì–´ êµ¬ì„± ìš”ì†Œê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ì—ˆë‹¤ê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ë©´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
> - ì´ê²ƒì€ **ë§¤ìš° ì¸ì²´ ê³µí•™ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.** [race conditions](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect)ì™€ ê°™ì€ ë²„ê·¸ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸° `fetch` ë¥¼ ì‘ì„±í•  ë•Œ ê´€ë ¨ëœ ìƒìš©êµ¬ ì½”ë“œê°€ ìƒë‹¹íˆ ë§ìŠµë‹ˆë‹¤.
>
> ì´ëŸ¬í•œ ë‹¨ì ë“¤ì€ Reactì—ë§Œ êµ­í•œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆìš´íŠ¸ ì‹œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì ìš©ë©ë‹ˆë‹¤. ë¼ìš°íŒ…ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°ê°€ ì‰½ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì ‘ê·¼ ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
>
> - [í”„ë ˆì„ì›Œí¬](https://react.dev/learn/start-a-new-react-project#production-grade-react-frameworks)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë‚´ì¥ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì„¸ìš”. ìµœì‹  React í”„ë ˆì„ì›Œí¬ì—ëŠ” íš¨ìœ¨ì ì´ê³  ìœ„ì˜ ìœ„í—˜ì„ ê²ªì§€ ì•ŠëŠ” ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë©”ì»¤ë‹ˆì¦˜ì´ í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
> - ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ì¸¡ ìºì‹œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì¸ê¸° ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ì—ëŠ”Â [React Query](https://tanstack.com/query/latest),Â [useSWR](https://swr.vercel.app/), ê·¸ë¦¬ê³ Â [React Router 6.4+](https://beta.reactrouter.com/en/main/start/overview)ê°€ ìˆìŠµë‹ˆë‹¤. ìì‹ ë§Œì˜ ì†”ë£¨ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° í›„ë“œ ì•„ë˜ì—ì„œ Effectsë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ìš”ì²­ ì¤‘ë³µ ì œê±°, ì‘ë‹µ ìºì‹± ë° ë„¤íŠ¸ì›Œí¬ í­í¬ ë°©ì§€(ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ë°ì´í„° ìš”êµ¬ ì‚¬í•­ì„ ê²½ë¡œì— í˜¸ì´ìŠ¤íŒ…í•˜ì—¬)ë¥¼ ìœ„í•œ ë…¼ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
>
> ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ ì¤‘ ì–´ëŠ ê²ƒë„ ì í•©í•˜ì§€ ì•Šì€ ê²½ìš° ê³„ì†í•´ì„œ Effectsì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë¶„ì„ ë³´ë‚´ê¸°

í˜ì´ì§€ ë°©ë¬¸ ì‹œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚´ëŠ” ì´ ì½”ë“œë¥¼ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.

```javascript
useEffect(() => {
  logVisit(url); // Sends a POST request
}, [url]);
```

ê°œë°œ ì¤‘ì— `logVisit`ì€ ëª¨ë“  URLì— ëŒ€í•´ ë‘ ë²ˆ í˜¸ì¶œë˜ë¯€ë¡œ ì´ë¥¼ ìˆ˜ì •í•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ì´ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.** ì´ì „ ì˜ˆì œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•œ ë²ˆ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ë‘ ë²ˆ ì‹¤í–‰í•˜ëŠ” ê²ƒ ì‚¬ì´ì— ì‚¬ìš©ìê°€ ë³¼ ìˆ˜ ìˆëŠ” ë™ì‘ ì°¨ì´ëŠ” ì—†ìŠµë‹ˆë‹¤. ì‹¤ì œì ì¸ ê´€ì ì—ì„œ `logVisit`ì€ ê°œë°œ ì‹œìŠ¤í…œì˜ ë¡œê·¸ê°€ í”„ë¡œë•ì…˜ ë©”íŠ¸ë¦­ì„ ì™œê³¡í•˜ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°œë°œ ì¤‘ì— ì•„ë¬´ ì‘ì—…ë„ ìˆ˜í–‰í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. êµ¬ì„± ìš”ì†ŒëŠ” íŒŒì¼ì„ ì €ì¥í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ë¯€ë¡œ ì–´ì¨Œë“  ê°œë°œ ì¤‘ì¸ ì¶”ê°€ ë°©ë¬¸ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

**í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¤‘ë³µ ë°©ë¬¸ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.**

ì „ì†¡ ì¤‘ì¸ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë””ë²„ê¹…í•˜ë ¤ë©´ ìŠ¤í…Œì´ì§• í™˜ê²½(í”„ë¡œë•ì…˜ ëª¨ë“œì—ì„œ ì‹¤í–‰)ì— ì•±ì„ ë°°í¬í•˜ê±°ë‚˜ [Strict Mode](https://react.dev/reference/react/StrictMode) ë° í•´ë‹¹ ê°œë°œ ì „ìš© ì¬ë§ˆìš´íŠ¸ í™•ì¸ì„ ì¼ì‹œì ìœ¼ë¡œ ì˜µíŠ¸ì•„ì›ƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Effects ëŒ€ì‹  ê²½ë¡œ ë³€ê²½ ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸°ì—ì„œ ë¶„ì„ì„ ë³´ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë³´ë‹¤ ì •í™•í•œ ë¶„ì„ì„ ìœ„í•´ [intersection observers](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)ëŠ” ë·°í¬íŠ¸ì— ì–´ë–¤ êµ¬ì„± ìš”ì†Œê°€ ìˆê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ í‘œì‹œë˜ëŠ”ì§€ ì¶”ì í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Effectê°€ ì•„ë‹˜: ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”

ì¼ë¶€ ë¡œì§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. êµ¬ì„± ìš”ì†Œ ì™¸ë¶€ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
if (typeof window !== 'undefined') {
  // Check if we're running in the browser.
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

ì´ë ‡ê²Œ í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ í˜ì´ì§€ë¥¼ ë¡œë“œí•œ í›„ ì´ëŸ¬í•œ ë…¼ë¦¬ê°€ í•œ ë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### Effectê°€ ì•„ë‹˜: ì œí’ˆ êµ¬ë§¤

ê²½ìš°ì— ë”°ë¼ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë”ë¼ë„ Effectë¥¼ ë‘ ë²ˆ ì‹¤í–‰í•˜ì—¬ ì‚¬ìš©ìê°€ ë³¼ ìˆ˜ ìˆëŠ” ê²°ê³¼ë¥¼ ë°©ì§€í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Effectê°€ ì œí’ˆ êµ¬ë§¤ì™€ ê°™ì€ POST ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
useEffect(() => {
  // ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.
  fetch('/api/buy', { method: 'POST' });
}, []);
```

ì œí’ˆì„ ë‘ ë²ˆ ì‚¬ê³  ì‹¶ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ ë˜í•œ ì´ ë¡œì§ì„ Effectì— ë„£ì§€ ë§ì•„ì•¼ í•˜ëŠ” ì´ìœ ì´ê¸°ë„ í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•œ ë‹¤ìŒ ë’¤ë¡œë¥¼ ëˆ„ë¥´ë©´ ì–´ë–»ê²Œ ë©ë‹ˆê¹Œ? íš¨ê³¼ê°€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•  ë•Œ ì œí’ˆì„ êµ¬ë§¤í•˜ê³  ì‹¶ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ êµ¬ë§¤ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œ êµ¬ë§¤í•˜ë ¤ê³  í•©ë‹ˆë‹¤.

êµ¬ë§¤ëŠ” ë Œë”ë§ìœ¼ë¡œ ì¸í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. íŠ¹ì • ìƒí˜¸ ì‘ìš©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. **Effectë¥¼ ì‚­ì œí•˜ê³  `/api/buy` ìš”ì²­ì„ êµ¬ë§¤ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ì´ë™í•©ë‹ˆë‹¤.**

```javascript
function handleClick() {
  // âœ… Buying is an event because it is caused by a particular interaction.
  fetch('/api/buy', { method: 'POST' });
}
```

**ì´ê²ƒì€ ì¬ë§ˆìš´íŠ¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë…¼ë¦¬ë¥¼ ì†ìƒì‹œí‚¤ëŠ” ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ ê¸°ì¡´ ë²„ê·¸ë¥¼ ë°œê²¬í•œë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.**  
ì‚¬ìš©ìì˜ ê´€ì ì—ì„œ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ëŠ” ê²ƒì€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ì—¬ ë§í¬ë¥¼ í´ë¦­í•˜ê³  ë’¤ë¡œë¥¼ ëˆ„ë¥´ëŠ” ê²ƒê³¼ ë‹¤ë¥´ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. ReactëŠ” ê°œë°œ ë‹¨ê³„ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì´ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

## í•œ ê³³ì— ëª¨ìœ¼ê¸°

ì´ í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” Effectsê°€ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ "ëŠë¼ëŠ”" ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì˜ˆì—ì„œëŠ” [setTimeout](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout)ì„ ì‚¬ìš©í•˜ì—¬ Effect ì‹¤í–‰ í›„ 3ì´ˆ í›„ì— í‘œì‹œë  ì…ë ¥ í…ìŠ¤íŠ¸ê°€ ìˆëŠ” ì½˜ì†” ë¡œê·¸ë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤. ì •ë¦¬ ê¸°ëŠ¥ì€ ë³´ë¥˜ ì¤‘ì¸ ì œí•œ ì‹œê°„ì„ ì·¨ì†Œí•©ë‹ˆë‹¤. "ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸"ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•©ë‹ˆë‹¤.

```javascript
import { useState, useEffect } from 'react';

function Playground() {
  const [text, setText] = useState('a');

  useEffect(() => {
    function onTimeout() {
      console.log('â° ' + text);
    }

    console.log('ğŸ”µ Schedule "' + text + '" log');
    const timeoutId = setTimeout(onTimeout, 3000);

    return () => {
      console.log('ğŸŸ¡ Cancel "' + text + '" log');
      clearTimeout(timeoutId);
    };
  }, [text]);

  return (
    <>
      <label>
        What to log:{' '}
        <input value={text} onChange={(e) => setText(e.target.value)} />
      </label>
      <h1>{text}</h1>
    </>
  );
}

export default function App() {
  const [show, setShow] = useState(false);
  return (
    <>
      <button onClick={() => setShow(!show)}>
        {show ? 'Unmount' : 'Mount'} the component
      </button>
      {show && <hr />}
      {show && <Playground />}
    </>
  );
}
```

ì²˜ìŒì—ëŠ” `"a" ë¡œê·¸ ì˜ˆì•½`, `"a" ë¡œê·¸ ì·¨ì†Œ` ë° `"a" ë¡œê·¸ ì˜ˆì•½`ì˜ ì„¸ ê°€ì§€ ë¡œê·¸ê°€ í‘œì‹œë©ë‹ˆë‹¤. 3ì´ˆ í›„ì— `a`ë¼ëŠ” ë¡œê·¸ë„ í‘œì‹œë©ë‹ˆë‹¤. ì´ì „ì— ë°°ì› ë“¯ì´ ì¶”ê°€ ì¼ì •/ì·¨ì†Œ ìŒì€ Reactê°€ ì •ë¦¬ë¥¼ ì˜ êµ¬í˜„í–ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê°œë°œ ë‹¨ê³„ì—ì„œ êµ¬ì„± ìš”ì†Œë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ì œ ì…ë ¥ì„ í¸ì§‘í•˜ì—¬ `abc`ë¼ê³  ë§í•˜ì‹­ì‹œì˜¤. ì¶©ë¶„íˆ ë¹¨ë¦¬ ìˆ˜í–‰í•˜ë©´ `"ab" ë¡œê·¸ ì˜ˆì•½`ê³¼ `"ab" ë¡œê·¸ ì·¨ì†Œ` ë° `"abc" ë¡œê·¸ ì˜ˆì•½`ì´ ë°”ë¡œ í‘œì‹œë©ë‹ˆë‹¤. **ReactëŠ” í•­ìƒ ë‹¤ìŒ ë Œë”ë§ì˜ íš¨ê³¼ ì „ì— ì´ì „ ë Œë”ë§ì˜ íš¨ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.** ë”°ë¼ì„œ ì…ë ¥ì„ ë¹ ë¥´ê²Œ ì…ë ¥í•˜ë”ë¼ë„ í•œ ë²ˆì— ìµœëŒ€ í•œ ë²ˆë§Œ ì œí•œ ì‹œê°„ì´ ì˜ˆì•½ë©ë‹ˆë‹¤. ì…ë ¥ì„ ëª‡ ë²ˆ í¸ì§‘í•˜ê³  ì½˜ì†”ì„ ë³´ë©´ì„œ íš¨ê³¼ê°€ ì–´ë–»ê²Œ ì •ë¦¬ë˜ëŠ”ì§€ ê°ì„ ì¡ìœ¼ì‹­ì‹œì˜¤.

ì…ë ¥ì— ë¬´ì–¸ê°€ë¥¼ ì…ë ¥í•œ ë‹¤ìŒ ì¦‰ì‹œ "êµ¬ì„± ìš”ì†Œ ë§ˆìš´íŠ¸ í•´ì œ"ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤. ë§ˆìš´íŠ¸ í•´ì œê°€ ë§ˆì§€ë§‰ ë Œë”ë§ì˜ íš¨ê³¼ë¥¼ ì •ë¦¬í•˜ëŠ” ë°©ë²•ì— ì£¼ëª©í•˜ì‹­ì‹œì˜¤. ì—¬ê¸°ì—ì„œ ì‹¤í–‰ ê¸°íšŒë¥¼ ê°–ê¸° ì „ì— ë§ˆì§€ë§‰ ì œí•œ ì‹œê°„ì„ ì§€ì›ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ„ì˜ êµ¬ì„± ìš”ì†Œë¥¼ í¸ì§‘í•˜ê³  ì •ë¦¬ ê¸°ëŠ¥ì„ ì£¼ì„ ì²˜ë¦¬í•˜ì—¬ ì‹œê°„ ì´ˆê³¼ê°€ ì·¨ì†Œë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. `abcde`ë¥¼ ë¹ ë¥´ê²Œ ì…ë ¥í•´ ë³´ì„¸ìš”. 3ì´ˆ í›„ì— ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚  ê²ƒìœ¼ë¡œ ì˜ˆìƒí•˜ì‹­ë‹ˆê¹Œ? timeout ë‚´ë¶€ì˜ `console.log(text)`ê°€ ìµœì‹  `text`ë¥¼ ì¸ì‡„í•˜ê³  5ê°œì˜ `abcde` ë¡œê·¸ë¥¼ ìƒì„±í•©ë‹ˆê¹Œ? ë‹¹ì‹ ì˜ ì§ê°ì„ í™•ì¸í•´ë³´ì„¸ìš”!

3ì´ˆ í›„ì— 5ê°œì˜ `abcde` ë¡œê·¸ê°€ ì•„ë‹Œ ì¼ë ¨ì˜ ë¡œê·¸(`a`, `ab`, `abc`, `abcd`, and `abcde`)ê°€ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤. **ê° íš¨ê³¼ëŠ” í•´ë‹¹ ë Œë”ë§ì—ì„œ `text` ê°’ì„ "ìº¡ì²˜"í•©ë‹ˆë‹¤.** words ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `text = 'ab'`ì¸ ë Œë”ë§ì˜ íš¨ê³¼ëŠ” í•­ìƒ `'ab'`ë¥¼ ë³¼ ê²ƒì…ë‹ˆë‹¤. ì¦‰, ê° ë Œë”ë§ì˜ íš¨ê³¼ëŠ” ì„œë¡œ ê²©ë¦¬ë©ë‹ˆë‹¤. ì´ê²ƒì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ê¶ê¸ˆí•˜ë‹¤ë©´ [closures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)ì— ëŒ€í•´ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **[DEEP DIVE] ê° ë Œë”ë§ì—ëŠ” ê³ ìœ í•œ íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.**  
> `useEffect`ë¥¼ ë Œë”ë§ ì¶œë ¥ì— ë™ì‘ì˜ ì¼ë¶€ë¥¼ "ì²¨ë¶€"í•˜ëŠ” ê²ƒìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ íš¨ê³¼ë¥¼ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.
>
> ```javascript
> export default function ChatRoom({ roomId }) {
>   useEffect(() => {
>     const connection = createConnection(roomId);
>     connection.connect();
>     return () => connection.disconnect();
>   }, [roomId]);
>
>   return <h1>Welcome to {roomId}!</h1>;
> }
> ```
>
> ì‚¬ìš©ìê°€ ì•±ì„ íƒìƒ‰í•  ë•Œ ì •í™•íˆ ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
>
> ### ì´ˆê¸° ë Œë”ë§
>
> ì‚¬ìš©ìê°€ `<ChatRoom roomId="general" />`ì„ ë°©ë¬¸í•©ë‹ˆë‹¤. `roomId`ë¥¼ `'general'`ë¡œ [ëŒ€ì²´](https://react.dev/learn/state-as-a-snapshot#rendering-takes-a-snapshot-in-time)í•´ ë³´ê² ìŠµë‹ˆë‹¤.
>
> ```javascript
> // JSX for the first render (roomId = "general")
> return <h1>Welcome to general!</h1>;
> ```
>
> Effect**ëŠ” _ë˜í•œ_ ë Œë”ë§ ì¶œë ¥ì˜ ì¼ë¶€ì´ê¸°ë„ í•©ë‹ˆë‹¤.** ì²« ë²ˆì§¸ ë Œë”ë§ì˜ íš¨ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>
> ```javascript
> // Effect for the first render (roomId = "general")
> () => {
>   const connection = createConnection('general');
>   connection.connect();
>   return () => connection.disconnect();
> },
>   // Dependencies for the first render (roomId = "general")
>   ['general'];
> ```
>
> ReactëŠ” 'ì¼ë°˜' ëŒ€í™”ë°©ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ì´ Effectë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
>
> ### ë™ì¼í•œ ì¢…ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ì‹œ ë Œë”ë§
>
> `<ChatRoom roomId="general" />`ì´ ë‹¤ì‹œ ë Œë”ë§ëœë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. JSX ì¶œë ¥ì€ ë™ì¼í•©ë‹ˆë‹¤.
>
> ```javascript
> // JSX for the second render (roomId = "general")
> return <h1>Welcome to general!</h1>;
> ```
>
> ReactëŠ” ë Œë”ë§ ì¶œë ¥ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•˜ë¯€ë¡œ DOMì„ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> ë‘ ë²ˆì§¸ ë Œë”ë§ì˜ íš¨ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>
> ```javascript
> // Effect for the second render (roomId = "general")
> () => {
>   const connection = createConnection('general');
>   connection.connect();
>   return () => connection.disconnect();
> },
>   // Dependencies for the second render (roomId = "general")
>   ['general'];
> ```
>
> ReactëŠ” ë‘ ë²ˆì§¸ ë Œë”ë§ì˜ `['general']`ì„ ì²« ë²ˆì§¸ ë Œë”ë§ì˜ `['general']`ê³¼ ë¹„êµí•©ë‹ˆë‹¤. ëª¨ë“  ì¢…ì†ì„±ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ReactëŠ” ë‘ ë²ˆì§¸ ë Œë”ë§ì˜ Effectë¥¼ ë¬´ì‹œí•©ë‹ˆë‹¤. ì ˆëŒ€ í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> ### ë‹¤ë¥¸ ì¢…ì†ì„±ìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§
>
> ê·¸ëŸ° ë‹¤ìŒ ì‚¬ìš©ìëŠ” `<ChatRoom roomId="travel" />`ì„ ë°©ë¬¸í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” êµ¬ì„± ìš”ì†Œê°€ ë‹¤ë¥¸ JSXë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
>
> ```javascript
> // JSX for the third render (roomId = "travel")
> return <h1>Welcome to travel!</h1>;
> ```
>
> ReactëŠ” DOMì„ ì—…ë°ì´íŠ¸í•˜ì—¬ `"Welcome to general"`ì„ `"Welcome to travel"`ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
>
> ì„¸ ë²ˆì§¸ ë Œë”ë§ì˜ íš¨ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>
> ```javascript
> // Effect for the third render (roomId = "travel")
> () => {
>   const connection = createConnection('travel');
>   connection.connect();
>   return () => connection.disconnect();
> },
>   // Dependencies for the third render (roomId = "travel")
>   ['travel'];
> ```
>
> ReactëŠ” ì„¸ ë²ˆì§¸ ë Œë”ë§ì˜ `['travel']`ì„ ë‘ ë²ˆì§¸ ë Œë”ë§ì˜ `['general']`ê³¼ ë¹„êµí•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì¢…ì†ì„±ì´ ë‹¤ë¦…ë‹ˆë‹¤. `Object.is('travel', 'general')`ì€ `false`ì…ë‹ˆë‹¤. íš¨ê³¼ëŠ” ê±´ë„ˆë›¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
>
> **Reactê°€ ì„¸ ë²ˆì§¸ ë Œë”ë§ì—ì„œ Effectë¥¼ ì ìš©í•˜ë ¤ë©´ ë¨¼ì € ì‹¤í–‰ëœ ë§ˆì§€ë§‰ Effectë¥¼ ì •ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.** ë‘ ë²ˆì§¸ ë Œë”ë§ì˜ Effectë¥¼ ê±´ë„ˆë›°ì—ˆìœ¼ë¯€ë¡œ ReactëŠ” ì²« ë²ˆì§¸ ë Œë”ë§ì˜ Effectë¥¼ ì •ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ ë Œë”ë§ê¹Œì§€ ìŠ¤í¬ë¡¤í•˜ë©´ `createConnection('general')`ìœ¼ë¡œ ìƒì„±ëœ ì—°ê²°ì—ì„œ ì •ë¦¬ê°€ `disconnect()`ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ `'general'` ëŒ€í™”ë°©ì—ì„œ ì•±ì˜ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.
>
> ê·¸ í›„ ReactëŠ” ì„¸ ë²ˆì§¸ ë Œë”ë§ì˜ Effectë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. `'travel'` ëŒ€í™”ë°©ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.
>
> ### Unmount : ë§ˆìš´íŠ¸ í•´ì œ
>
> ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í•˜ê³  `ChatRoom` êµ¬ì„± ìš”ì†Œê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ì—ˆë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ReactëŠ” ë§ˆì§€ë§‰ Effectì˜ ì •ë¦¬ ê¸°ëŠ¥ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ íš¨ê³¼ëŠ” ì„¸ ë²ˆì§¸ ë Œë”ë§ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì…ë‹ˆë‹¤. ì„¸ ë²ˆì§¸ ë Œë”ë§ì˜ ì •ë¦¬ëŠ” `createConnection('travel')` ì—°ê²°ì„ íŒŒê´´í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì•±ì€ `'travel'` ë°©ê³¼ì˜ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.
>
> ### ê°œë°œ ì „ìš© ë™ì‘
>
> ì—„ê²© ëª¨ë“œê°€ ì¼œì ¸ ìˆìœ¼ë©´ ReactëŠ” ë§ˆìš´íŠ¸ í›„ ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ í•œ ë²ˆ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤(ìƒíƒœ ë° DOMì´ ë³´ì¡´ë¨). ì´ë¥¼ í†µí•´ ì •ë¦¬ê°€ í•„ìš”í•œ íš¨ê³¼ë¥¼ ì°¾ê³  ê²½í•© ìƒíƒœì™€ ê°™ì€ ë²„ê·¸ë¥¼ ì¡°ê¸°ì— ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ReactëŠ” ê°œë°œ ì¤‘ì— íŒŒì¼ì„ ì €ì¥í•  ë•Œë§ˆë‹¤ Effectë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë™ì‘ì€ ëª¨ë‘ ê°œë°œ ì „ìš©ì…ë‹ˆë‹¤.

## Recap

- ì´ë²¤íŠ¸ì™€ ë‹¬ë¦¬ EffectëŠ” íŠ¹ì • ìƒí˜¸ ì‘ìš©ì´ ì•„ë‹Œ ë Œë”ë§ ìì²´ì— ì˜í•´ ë°œìƒí•©ë‹ˆë‹¤.
- Effectë¥¼ ì‚¬ìš©í•˜ë©´ ì¼ë¶€ ì™¸ë¶€ ì‹œìŠ¤í…œ(íƒ€ì‚¬ API, ë„¤íŠ¸ì›Œí¬ ë“±)ê³¼ êµ¬ì„± ìš”ì†Œë¥¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ëª¨ë“  ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤(ì´ˆê¸° ë Œë”ë§ í¬í•¨).
- ëª¨ë“  ì¢…ì†ì„±ì´ ë§ˆì§€ë§‰ ë Œë”ë§ ë™ì•ˆê³¼ ë™ì¼í•œ ê°’ì„ ê°–ëŠ” ê²½ìš° ReactëŠ” Effectë¥¼ ê±´ë„ˆëœë‹ˆë‹¤.
- ì¢…ì†ì„±ì„ "ì„ íƒ"í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ Effect ë‚´ë¶€ì˜ ì½”ë“œì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.
- ë¹ˆ ì¢…ì†ì„± ë°°ì—´(`[]`)ì€ êµ¬ì„± ìš”ì†Œ "ë§ˆìš´íŒ…", ì¦‰ í™”ë©´ì— ì¶”ê°€ë˜ëŠ” ê²ƒì— í•´ë‹¹í•©ë‹ˆë‹¤.
- Strict ëª¨ë“œì—ì„œ ReactëŠ” êµ¬ì„± ìš”ì†Œë¥¼ ë‘ ë²ˆ ë§ˆìš´íŠ¸í•˜ì—¬(ê°œë°œ ì¤‘ì¸ ê²½ìš°ì—ë§Œ!) íš¨ê³¼ë¥¼ ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
- ì¬ë§ˆìš´íŠ¸ë¡œ ì¸í•´ Effectê°€ ê¹¨ì§€ëŠ” ê²½ìš° ì •ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
- ReactëŠ” ë‹¤ìŒì— Effectê°€ ì‹¤í–‰ë˜ê¸° ì „ê³¼ ë§ˆìš´íŠ¸ í•´ì œ ì¤‘ì— ì •ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
