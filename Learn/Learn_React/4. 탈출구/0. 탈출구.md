# 4. íƒˆì¶œêµ¬

ì»´í¬ë„ŒíŠ¸ ì¤‘ ì¼ë¶€ëŠ” React ì™¸ë¶€ì˜ ì‹œìŠ¤í…œì„ ì œì–´í•˜ê³  ë™ê¸°í™”í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¸Œë¼ìš°ì € APIë¥¼ ì‚¬ìš©í•´ inputì— í¬ì»¤ìŠ¤ë¥¼ ë§ì¶”ê±°ë‚˜, React ì—†ì´ êµ¬í˜„ëœ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ë¥¼ ì¬ìƒ ë° ì¼ì‹œì •ì§€í•˜ê±°ë‚˜, ì›ê²© ì„œë²„ì— ì—°ê²°í•´ì„œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¥ì—ì„œëŠ” Reactì˜ "ì™¸ë¶€"ë¡œ ë‚˜ê°€ì„œ ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” íƒˆì¶œêµ¬ë¥¼ ë°°ìš°ê²Œ ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ê³¼ ë°ì´í„° íë¦„ì€ ì´ëŸ¬í•œ ê¸°ëŠ¥ì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.

## refë¡œ ê°’ ì°¸ì¡°í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ê°€ íŠ¹ì • ì •ë³´ë¥¼ 'ê¸°ì–µ'í•˜ë„ë¡ í•˜ê³  ì‹¶ì§€ë§Œ í•´ë‹¹ ì •ë³´ê°€ [ìƒˆ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°](https://www.notion.so/2-3-Render-and-Commit-ecf4950ea19d485bbd5df75040dc59d4)í•˜ì§€ ì•Šë„ë¡ í•˜ë ¤ëŠ” ê²½ìš° *ref*ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```javascript
const ref = useRef(0);
```

stateì™€ ë§ˆì°¬ê°€ì§€ë¡œ refëŠ” ë¦¬ë Œë”ë§ ì‚¬ì´ì— Reactì— ì˜í•´ ìœ ì§€ë©ë‹ˆë‹¤. ë‹¤ë§Œ stateë¥¼ ì„¤ì •í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ëŠ” ë°˜ë©´, refë¥¼ ë³€ê²½í•˜ë©´ ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤! `ref.current` í”„ë¡œí¼í‹°ë¥¼ í†µí•´ í•´ë‹¹ refì˜ í˜„ì¬ ê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
import { useRef } from 'react';

export default function Counter() {
  let ref = useRef(0);

  function handleClick() {
    ref.current = ref.current + 1;
    alert('You clicked ' + ref.current + ' times!');
  }

  return <button onClick={handleClick}>Click me!</button>;
}
```

refëŠ” Reactê°€ ì¶”ì í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë¹„ë°€ ì£¼ë¨¸ë‹ˆì™€ ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, refë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ì¶œë ¥ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” [timeout ID](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#return_value), [DOM ì—˜ë¦¬ë¨¼íŠ¸](https://developer.mozilla.org/en-US/docs/Web/API/Element) ë° ê¸°íƒ€ ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## refë¡œ DOM ì¡°ì‘í•˜ê¸°

ReactëŠ” ë Œë”ë§ ì¶œë ¥ê³¼ ì¼ì¹˜í•˜ë„ë¡ DOMì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì£¼ ì¡°ì‘í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” ë…¸ë“œì— í¬ì»¤ìŠ¤ë¥¼ ë§ì¶”ê±°ë‚˜ ìŠ¤í¬ë¡¤í•˜ê±°ë‚˜ í¬ê¸°ì™€ ìœ„ì¹˜ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ Reactê°€ ê´€ë¦¬í•˜ëŠ” DOM ìš”ì†Œì— ì ‘ê·¼í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. Reactì—ëŠ” ì´ëŸ¬í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë‚´ì¥ëœ ë°©ë²•ì´ ì—†ìœ¼ë¯€ë¡œ DOM ë…¸ë“œì— ëŒ€í•œ ref(ì°¸ì¡°)ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ refë¥¼ ì‚¬ìš©í•´ ì…ë ¥ì— í¬ì»¤ìŠ¤ë¥¼ ë§ì¶¥ë‹ˆë‹¤:

```javascript
import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleClick}>Focus the input</button>
    </>
  );
}
```

## Effectì™€ ë™ê¸°í™”í•˜ê¸°

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ React ìƒíƒœì— ë”°ë¼ ë¹„ React ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê±°ë‚˜, ì„œë²„ ì—°ê²°ì„ ì„¤ì •í•˜ê±°ë‚˜, ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— í‘œì‹œë  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë‹¬ë¦¬ *Effect*ë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ í›„ ì¼ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ React ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¬ìƒ/ì¼ì‹œì •ì§€ë¥¼ ëª‡ ë²ˆ ëˆ„ë¥´ê³  ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ê°€ `isPlaying` í”„ë¡œí¼í‹° ê°’ì— ì–´ë–»ê²Œ ë™ê¸°í™”ë˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì„¸ìš”:

```javascript
import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);

  return <video ref={ref} src={src} loop playsInline />;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Pause' : 'Play'}
      </button>
      <VideoPlayer
        isPlaying={isPlaying}
        src='https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'
      />
    </>
  );
}
```

ë§ì€ EffectëŠ” ìŠ¤ìŠ¤ë¡œ "ì •ë¦¬"í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì±„íŒ… ì„œë²„ì— ëŒ€í•œ ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” EffectëŠ” í•´ë‹¹ ì„œë²„ì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ ì—°ê²°ì„ ëŠëŠ” ë°©ë²•ì„ Reactì— ì•Œë ¤ì£¼ëŠ” ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤:

```javascript
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
  }, []);
  return <h1>Welcome to the chat!</h1>;
}
```

ê°œë°œ ëª¨ë“œì—ì„œ ReactëŠ” Effectë¥¼ ì¦‰ì‹œ ì‹¤í–‰í•˜ê³  ì •ë¦¬í•˜ëŠ” ì‘ì—…ì„ ì¶”ê°€ë¡œ í•œ ë²ˆ ë” í•©ë‹ˆë‹¤. ì´ê²ƒì´ "âœ… ì—°ê²° ì¤‘..."ì´ ë‘ ë²ˆ ì¸ì‡„ë˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì •ë¦¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ìŠì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤

EffectëŠ” React íŒ¨ëŸ¬ë‹¤ì„ì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆëŠ” íƒˆì¶œêµ¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Reactì˜ "ì™¸ë¶€"ë¡œ ë‚˜ê°€ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™¸ë¶€ ì‹œìŠ¤í…œì´ ê´€ì—¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°(ì˜ˆ: ì¼ë¶€ propì´ë‚˜ stateê°€ ë³€ê²½ë  ë•Œ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ê²½ìš°)ì—ëŠ” Effectê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ Effectë¥¼ ì œê±°í•˜ë©´ ì½”ë“œë¥¼ ë” ì‰½ê²Œ ë”°ë¼ê°ˆ ìˆ˜ ìˆê³ , ì‹¤í–‰ ì†ë„ê°€ ë¹¨ë¼ì§€ë©°, ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.

ì´í™íŠ¸ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ì¼ë°˜ì ì¸ ê²½ìš°ëŠ” ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:

- **ë Œë”ë§ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ë³€í™˜í•  ë•Œ EffectëŠ” í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**
- **ì‚¬ìš©ì ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ë•Œ EffectëŠ” í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ë¥¸ ìƒíƒœì— ë”°ë¼ ì¼ë¶€ ìƒíƒœë¥¼ ì¡°ì •í•˜ëŠ” ë°ëŠ” Effectê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤:

```javascript
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');

  // ğŸ”´ Avoid: redundant state and unnecessary Effect
  const [fullName, setFullName] = useState('');
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
```

ëŒ€ì‹  ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ê°€ëŠ¥í•œ í•œ ë§ì´ ê³„ì‚°í•˜ì„¸ìš”:

```javascript
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // âœ… Good: calculated during rendering
  const fullName = firstName + ' ' + lastName;
  // ...
}
```

ë°˜ëŒ€ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ë ¤ë©´ Effectsê°€ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤.

## ë°˜ì‘í˜• effectì˜ ìƒëª…ì£¼ê¸°

EffectëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ë‹¤ë¥¸ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸ ë˜ëŠ” ì–¸ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ EffectëŠ” ë™ê¸°í™”ë¥¼ ì‹œì‘í•˜ê±°ë‚˜ ë™ê¸°í™”ë¥¼ ì¤‘ì§€í•˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ë§Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Effectê°€ ì‹œê°„ì— ë”°ë¼ ë³€í•˜ëŠ” prop ë° stateì— ì˜ì¡´í•˜ëŠ” ê²½ìš° ì´ ì£¼ê¸°ëŠ” ì—¬ëŸ¬ ë²ˆ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ ì˜ˆì‹œì˜ EffectëŠ” `roomId` propì˜ ê°’ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. Propì€ *ë°˜ì‘í˜• ê°’*ì´ë¯€ë¡œ ë‹¤ì‹œ ë Œë”ë§í•  ë•Œ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `roomId`ê°€ ë³€ê²½ë˜ë©´ ì´í™íŠ¸ê°€ _ì¬ë™ê¸°í™”_(ë° ì„œë²„ ì¬ì—°ê²°)ë©ë‹ˆë‹¤:

```javascript
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value='general'>general</option>
          <option value='travel'>travel</option>
          <option value='music'>music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

ReactëŠ” ì´í™íŠ¸ì˜ ì¢…ì†ì„±ì„ ì˜¬ë°”ë¥´ê²Œ ì§€ì •í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¦°í„° ê·œì¹™ì„ ì œê³µí•©ë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì‹œì—ì„œ ì¢…ì†ì„± ëª©ë¡ì— `roomId`ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì„ ìŠì–´ë²„ë ¸ë‹¤ë©´, ë¦°í„°ê°€ í•´ë‹¹ ë²„ê·¸ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ë‚¼ ê²ƒì…ë‹ˆë‹¤.

## ì´ë²¤íŠ¸ì™€ Effect ë¶„ë¦¬í•˜ê¸°

> **Under Construction**  
> ì´ ì„¹ì…˜ì—ì„œëŠ” **ì•„ì§ Reactì— ì¶”ê°€ë˜ì§€ ì•Šì€ ì‹¤í—˜ì  API**ì— ëŒ€í•´ ì„¤ëª…í•˜ë©°, ì•„ì§ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë™ì¼í•œ ìƒí˜¸ì‘ìš©ì„ ë‹¤ì‹œ ìˆ˜í–‰í•  ë•Œë§Œ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë‹¬ë¦¬ EffectëŠ” propì´ë‚˜ state ë³€ìˆ˜ì²˜ëŸ¼ ì½ì€ ê°’ì´ ë§ˆì§€ë§‰ ë Œë”ë§ì—ì„œì™€ ë‹¤ë¥¸ ê²½ìš° ë‹¤ì‹œ ë™ê¸°í™”í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” ë‘ ê°€ì§€ ë™ì‘ì„ í˜¼í•©í•˜ì—¬ ì¼ë¶€ ê°’ì—ëŠ” ë°˜ì‘í•˜ì§€ë§Œ ë‹¤ë¥¸ ê°’ì—ëŠ” ë°˜ì‘í•˜ì§€ ì•ŠëŠ” íš¨ê³¼ë¥¼ ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Effect ë‚´ì˜ ëª¨ë“  ì½”ë“œëŠ” *ë°˜ì‘í˜•*ì´ë©°, ì½ì€ ë°˜ì‘í˜• ê°’ì´ ì¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ ë³€ê²½ëœ ê²½ìš° ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì˜ EffectëŠ” ìƒí˜¸ì‘ìš© í›„ `roomId` ë˜ëŠ” `theme`ì´ ë³€ê²½ëœ ê²½ìš° ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤:

```javascript
import { useState, useEffect } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, theme]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value='general'>general</option>
          <option value='travel'>travel</option>
          <option value='music'>music</option>
        </select>
      </label>
      <label>
        <input
          type='checkbox'
          checked={isDark}
          onChange={(e) => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom roomId={roomId} theme={isDark ? 'dark' : 'light'} />
    </>
  );
}
```

ì´ê²ƒì€ ì´ìƒì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. `roomId`ê°€ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. `theme`ë¥¼ ì „í™˜í•´ë„ ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤! `theme`ë¥¼ ì½ëŠ” ì½”ë“œë¥¼ íš¨ê³¼ì—ì„œ *Effect Event*ë¡œ ì˜®ê¸°ì„¸ìš”:

```javascript
import { useState, useEffect } from 'react';
import { experimental_useEffectEvent as useEffectEvent } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEffectEvent(() => {
    showNotification('Connected!', theme);
  });

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () => {
      onConnected();
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value='general'>general</option>
          <option value='travel'>travel</option>
          <option value='music'>music</option>
        </select>
      </label>
      <label>
        <input
          type='checkbox'
          checked={isDark}
          onChange={(e) => setIsDark(e.target.checked)}
        />
        Use dark theme
      </label>
      <hr />
      <ChatRoom roomId={roomId} theme={isDark ? 'dark' : 'light'} />
    </>
  );
}
```

ì´ë²¤íŠ¸ í•¨ìˆ˜ ë‚´ë¶€ì˜ ì½”ë“œëŠ” ë°˜ì‘í˜• ì½”ë“œê°€ ì•„ë‹ˆë¯€ë¡œ `theme`ë¥¼ ë³€ê²½í•´ë„ ë” ì´ìƒ ì´í™íŠ¸ê°€ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## Effect ì¢…ì†ì„± ì œê±°í•˜ê¸°

Effectë¥¼ ì‘ì„±í•  ë•Œ, Effectì˜ ì¢…ì†ì„± ëª©ë¡ì—ì„œ Effectê°€ ì½ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’(ì˜ˆ: prop ë° state)ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ Effectê°€ ì»´í¬ë„ŒíŠ¸ì˜ ìµœì‹  prop ë° stateì™€ ë™ê¸°í™”ëœ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ì¢…ì†ì„±ìœ¼ë¡œ ì¸í•´ Effectê°€ ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë˜ê±°ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì¢…ì†ì„±ì„ ì œê±°í•˜ëŠ” ë°©ë²•ì€ ê²½ìš°ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì´ EffectëŠ” ì‚¬ìš©ìê°€ inputì„ í¸ì§‘í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ ìƒì„±ë˜ëŠ” `options` ê°ì²´ì— ì˜ì¡´í•©ë‹ˆë‹¤:

```javascript
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = {
    serverUrl: serverUrl,
    roomId: roomId,
  };

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={(e) => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value='general'>general</option>
          <option value='travel'>travel</option>
          <option value='music'>music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

í•´ë‹¹ ì±„íŒ…ì— ë©”ì‹œì§€ë¥¼ ì…ë ¥í•  ë•Œë§ˆë‹¤ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šìœ¼ì‹¤ ê²ƒì…ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ Effect ë‚´ì—ì„œ `ì˜µì…˜` ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ Effectê°€ `roomId` ë¬¸ìì—´ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ í•˜ì„¸ìš”:

```javascript
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId,
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={(e) => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select value={roomId} onChange={(e) => setRoomId(e.target.value)}>
          <option value='general'>general</option>
          <option value='travel'>travel</option>
          <option value='music'>music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

ì¢…ì†ì„± ëª©ë¡ì„ í¸ì§‘í•˜ì—¬ `options` ì¢…ì†ì„±ì„ ì œê±°í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ì§€ ì•Šì•˜ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ëª»ëœ ë°©ë²•ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹  ì£¼ë³€ ì½”ë“œë¥¼ ë³€ê²½í•¨ìœ¼ë¡œì¨ ì¢…ì†ì„±ì„ _ë¶ˆí•„ìš”í•˜ê²Œ_ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¢…ì†ì„± ëª©ë¡ì„ Effectì˜ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì˜ ëª©ë¡ìœ¼ë¡œ ìƒê°í•˜ì„¸ìš”. ì´ ëª©ë¡ì— ë¬´ì—‡ì„ ë„£ì„ì§€ëŠ” ì˜ë„ì ìœ¼ë¡œ ì„ íƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ëª©ë¡ì€ ë‹¹ì‹ ì˜ ì½”ë“œë¥¼ ê¸°ìˆ í•©ë‹ˆë‹¤. ì¢…ì†ì„± ëª©ë¡ì„ ë³€ê²½í•˜ë ¤ë©´, ì½”ë“œë¥¼ ë³€ê²½í•˜ì„¸ìš”.

## ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë¡œì§ ì¬ì‚¬ìš©í•˜ê¸°

Reactì—ëŠ” `useState`, `useContext`, `useEffect`ì™€ ê°™ì€ í›…ì´ ë‚´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë•Œë¡œëŠ” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜, ì‚¬ìš©ìê°€ ì˜¨ë¼ì¸ ìƒíƒœì¸ì§€ ì¶”ì í•˜ê±°ë‚˜, ì±„íŒ…ë°©ì— ì—°ê²°í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ì¢€ ë” êµ¬ì²´ì ì¸ ëª©ì ì„ ìœ„í•œ í›…ì´ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•„ìš”ì— ë§ëŠ” ê³ ìœ í•œ í›…ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ì˜ˆì œì—ì„œëŠ” `usePointerPosition` ì»¤ìŠ¤í…€ í›…ì€ ì»¤ì„œ ìœ„ì¹˜ë¥¼ ì¶”ì í•˜ê³ , `useDelayedValue` ì»¤ìŠ¤í…€ í›…ì€ ì „ë‹¬í•œ ê°’ë³´ë‹¤ íŠ¹ì • ë°€ë¦¬ì´ˆë§Œí¼ 'ì§€ì—°'ëœ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```javascript
import { usePointerPosition } from './usePointerPosition.js';
import { useDelayedValue } from './useDelayedValue.js';

export default function Canvas() {
  const pos1 = usePointerPosition();
  const pos2 = useDelayedValue(pos1, 100);
  const pos3 = useDelayedValue(pos2, 200);
  const pos4 = useDelayedValue(pos3, 100);
  const pos5 = useDelayedValue(pos3, 50);
  return (
    <>
      <Dot position={pos1} opacity={1} />
      <Dot position={pos2} opacity={0.8} />
      <Dot position={pos3} opacity={0.6} />
      <Dot position={pos4} opacity={0.4} />
      <Dot position={pos5} opacity={0.2} />
    </>
  );
}

function Dot({ position, opacity }) {
  return (
    <div
      style={{
        position: 'absolute',
        backgroundColor: 'pink',
        borderRadius: '50%',
        opacity,
        transform: `translate(${position.x}px, ${position.y}px)`,
        pointerEvents: 'none',
        left: -20,
        top: -20,
        width: 40,
        height: 40,
      }}
    />
  );
}
```

```javascript
import { useState, useEffect } from 'react';

export function useDelayedValue(value, delay) {
  const [delayedValue, setDelayedValue] = useState(value);

  useEffect(() => {
    setTimeout(() => {
      setDelayedValue(value);
    }, delay);
  }, [value, delay]);

  return delayedValue;
}
```

```javascript
import { useState, useEffect } from 'react';

export function usePointerPosition() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  useEffect(() => {
    function handleMove(e) {
      setPosition({ x: e.clientX, y: e.clientY });
    }
    window.addEventListener('pointermove', handleMove);
    return () => window.removeEventListener('pointermove', handleMove);
  }, []);
  return position;
}
```

ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•˜ê³ , í•¨ê»˜ êµ¬ì„±í•˜ê³ , ì»´í¬ë„ŒíŠ¸ ê°„ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ , ì»´í¬ë„ŒíŠ¸ ê°„ì— ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•±ì´ ì„±ì¥í•¨ì— ë”°ë¼ ì´ë¯¸ ì‘ì„±í•œ ì»¤ìŠ¤í…€ í›…ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì§ì ‘ ì‘ì„±í•˜ëŠ” Effectì˜ ìˆ˜ê°€ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤. ë˜í•œ React ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ê´€ë¦¬í•˜ê³  ìˆëŠ” í›Œë¥­í•œ ì»¤ìŠ¤í…€ í›…ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤.
